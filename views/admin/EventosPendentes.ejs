<%- include("../partials/header") %>
  <div class="container-fluid">
    <div class="row g-0">

      <!-- Sidebar -->
      <nav class="col-md-3 col-lg-2 d-flex flex-column p-3 vh-100">
        <%- include("../partials/navbar", { activePage: "pendentes" }) %>
      </nav>

      <!-- Conteúdo -->
      <main class="col-md-9 col-lg-10 p-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h3 class="fw-bold">Eventos Pendentes</h3>
        </div>

        <% if (evento && evento.length> 0) { %>
          <div class="row g-3">
            <% evento.forEach(evento=> { %>
              <div class="col-12 col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm border-0">
                  <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-bold mb-3">
                      <%= evento.nome %>
                    </h5>
                    <ul class="list-unstyled small mb-2 flex-grow-1">
                      <li><strong>E-mail:</strong>
                        <%= evento.email %>
                      </li>
                      <li><strong>Telefone:</strong>
                        <%= evento.telefone %>
                      </li>
                      <li><strong>Tipo:</strong>
                        <%= evento.tipo %>
                      </li>
                      <li><strong>Data e hora:</strong>
                        <%= new Date(evento.dataHora).toLocaleString('pt-BR', { dateStyle: 'short' , timeStyle: 'short'
                          }) %>
                      </li>
                      <li><strong>Convidados:</strong>
                        <%= evento.convidados %>
                      </li>
                    </ul>
                    <p class="small mb-3"><strong>Descrição:</strong>
                      <%= evento.descricao %>
                    </p>

                    <!-- Campo de seleção centralizado para status -->
                    <form action="/admin/alterar-status/<%= evento.id %>" method="POST" class="mt-auto text-center">
                      <select name="status" class="form-select w-50 mx-auto" onchange="this.form.submit()">
                        <option value="pendente" <%=evento.status==='pendente' ? 'selected' : '' %>>Pendente</option>
                        <option value="aprovado" <%=evento.status==='aprovado' ? 'selected' : '' %>>Aprovado</option>
                        <option value="recusado" <%=evento.status==='recusado' ? 'selected' : '' %>>Recusado</option>
                      </select>
                    </form>
                    <!-- Fim select -->

                  </div>
                </div>
              </div>
              <% }) %>
          </div>
          <% } else { %>
            <div class="alert alert-info">Nenhum evento pendente no momento.</div>
            <% } %>
      </main>
    </div>
  </div>

  <%- include("../partials/footer") %>